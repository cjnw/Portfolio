{% extends 'shared/layout.html' %}
{% block maincontent %}

<div class="resume-container">
  {% for inst_id, inst in resume_data.items() %}
  <section class="institution">
    <!-- Institution header row: name on left, location on right -->
    <div class="institution-header">
      <div class="left">
        <h2 class="institution-name">{{ inst.name }}</h2>
      </div>
      <div class="right">
        {% if inst.city and inst.state %}
          <p>{{ inst.city }}, {{ inst.state }}</p>
        {% elif inst.city %}
          <p>{{ inst.city }}</p>
        {% elif inst.state %}
          <p>{{ inst.state }}</p>
        {% endif %}
      </div>
    </div>

    {% if inst.type and inst.type != 'NULL' %}
      <p class="institution-summary">{{ inst.type }}</p>
    {% endif %}
    {% if inst.department and inst.department != 'NULL' %}
      <p class="institution-summary">Department: {{ inst.department }}</p>
    {% endif %}
    {% if inst.address and inst.address != 'NULL' %}
      <p class="institution-summary">Address: {{ inst.address }}</p>
    {% endif %}

    <!-- Positions -->
    {% if inst.positions %}
      {% for pos_id, pos in inst.positions.items() %}
      <article class="position">
        <div class="position-header">
          <div class="left">
            <h3 class="position-title">{{ pos.title }}</h3>
          </div>
          <div class="right">
            <p>
              {% if pos.start_date and pos.start_date != 'NULL' %}
                {{ pos.start_date }}
              {% else %}
                N/A
              {% endif %}
              -
              {% if pos.end_date and pos.end_date != 'NULL' %}
                {{ pos.end_date }}
              {% else %}
                Current
              {% endif %}
            </p>
          </div>
        </div>

        {% if pos.responsibilities and pos.responsibilities != 'NULL' %}
          <p class="position-responsibilities">{{ pos.responsibilities }}</p>
        {% endif %}

        <!-- Experiences -->
        {% if pos.experiences %}
          <ul class="experience-list">
            {% for exp_id, exp in pos.experiences.items() %}
            <li class="experience-item">
              {% if exp.hyperlink and exp.hyperlink|lower != 'null' %}
                <strong><a href="{{ exp.hyperlink }}" target="_blank">{{ exp.name }}</a></strong>
              {% else %}
                <strong>{{ exp.name }}</strong>
              {% endif %}
              
              {% if exp.start_date or exp.end_date %}
                <span class="experience-dates">
                  ({{ exp.start_date if exp.start_date else 'N/A' }} - 
                   {{ exp.end_date if exp.end_date else 'N/A' }})
                </span>
              {% endif %}

              {% if exp.description and exp.description != 'NULL' %}
                <div class="experience-desc">{{ exp.description }}</div>
              {% endif %}

              {% if exp.skills %}
                <ul class="skill-list">
                  {% for skill_id, skill in exp.skills.items() %}
                    {% if skill.name and skill.name != 'NULL' %}
                      <li class="skill-item">{{ skill.name }}</li>
                    {% endif %}
                  {% endfor %}
                </ul>
              {% endif %}
            </li>
            {% endfor %}
          </ul>
        {% endif %}
      </article>
      {% endfor %}
    {% endif %}
  </section>
  {% endfor %}
</div> <!-- close .resume-container -->


{% endblock %}
